!function(e,t,s){t(["jquery","soundcloud","services/soundcloud-manager","utils/helper"],function(e,t,s,i){return{elements:{},classes:{play:"play",pause:"pause",wave:"wave",stream:"stream",progress:"progress",tempProgress:"progress_temp",coverCopy:"album-art-copy",cover:"album-art"},defaults:function(){return{}},ready:function(e,t){var s;this.options=i.extend(this.defaults(),t),this.options=i.extend(this.defaults(),t),this.elements=i.mapClassesToElements(this.classes,e),s=this.elements.stream.getBoundingClientRect(),this.streamWidth=s.right-s.left},events:function(e,t){this.options.id&&s.createStream(this.options.id).then(this.onStreamCreated.bind(this)),this.elements.stream.addEventListener("mousemove",this.onHoverProgress.bind(this)),this.elements.stream.addEventListener("mouseleave",this.onLeaveProgress.bind(this)),this.elements.stream.addEventListener("click",this.onClickProgress.bind(this)),this.elements.play.addEventListener("click",this.onClickPlay.bind(this)),this.elements.pause.addEventListener("click",this.onClickPause.bind(this)),this.elements.coverCopy.addEventListener("click",this.toggleAlbumFold.bind(this)),this.elements.cover.addEventListener("click",this.toggleAlbumFold.bind(this))},onClickPlay:function(){s.playStream(this.stream)},onClickPause:function(){s.pauseStream(this.stream)},onClickProgress:function(e){var t=100/this.streamWidth*e.layerX;this.changePosition(this.elements.progress,t),t=e.layerX/this.streamWidth*this.stream.options.duration,s.setPosition(this.stream,t)},onHoverProgress:function(e){var t=100/this.streamWidth*e.layerX;this.changePosition(this.elements.tempProgress,t)},onLeaveProgress:function(){this.changePosition(this.elements.tempProgress,0)},onStreamCreated:function(e){console.log(e),this.stream=e,this.stream.on("time",this.timeChanged.bind(this))},timeChanged:function(){this.openAlbum();var e=100/this.stream.options.duration*this.stream.currentTime();this.changePosition(this.elements.progress,e)},changePosition:function(e,t){e.style.width=t+"%"},toggleAlbumFold:function(){this.elements.coverCopy.classList.toggle("fold")},openAlbum:function(){this.elements.coverCopy.classList.add("fold")},closeAlbum:function(){this.elements.coverCopy.classList.remove("fold")}}})}(this.window,this.define,void 0);